# シェルピンスキーの三角形 - カオスゲーム（高機能版）

カオスゲームアルゴリズムを使用してシェルピンスキーの三角形を生成するインタラクティブなWebアプリケーションです。Google Mapのようなパン・ズーム操作と、パフォーマンス最適化機能を備えています。

## 機能

### 操作ボタン
- **▶ スタート**: 連続的な点の生成アニメーションを開始
- **⏸ 一時停止**: 実行中のアニメーションを一時停止
- **⟳ リセット**: すべての点をクリアし、表示をリセット

### 描画速度
アニメーション1フレームあたりの計算点数を選択：
- ゆっくり（1点/frame）
- 普通（10点/frame）
- 高速（100点/frame）- デフォルト
- 超高速（500点/frame）

### 一括実行
- 追加する点の数を入力
- 「実行」ボタンで一度にすべての点を追加
- 大量の点（50,000点超）は非同期で処理され、UIがブロックされません

### 負荷軽減
スムーズなパフォーマンスを維持するための描画点数制限：
- **OFF（全点描画）**: 制限なし - 計算されたすべての点を描画
- **低（最大50万点）**: 軽度の負荷軽減
- **中（最大10万点）**: 中程度の負荷軽減 - デフォルト
- **高（最大2万点）**: 低スペックデバイス向けの強力な負荷軽減

### パン＆ズーム（Google Map風操作）
- **マウスドラッグ**: 表示領域を移動
- **マウスホイール**: カーソル位置を中心に拡大・縮小
- **タッチドラッグ**: モバイルデバイスでの移動
- **ピンチズーム**: タッチデバイスでの2本指ズーム

### 統計表示
- **演算回数（総点数）**: 計算された点の総数
- **表示中の点数**: 現在描画されている点の数
- **現在の拡大率**: 現在のズーム倍率
- **ステータス**: 現在の動作状態

## アルゴリズム

シェルピンスキーの三角形はカオスゲーム法で生成されます：

1. 正三角形の3つの頂点を定義
2. 三角形内の任意の点からスタート
3. 3つの頂点からランダムに1つを選択
4. 現在の点と選択した頂点の中間点に移動
5. 新しい位置に点をプロット
6. ステップ3〜5を無限に繰り返す

このシンプルな反復プロセスで、有名なフラクタルパターンが生成されます。

## パフォーマンス最適化

- **ビューポートカリング**: 表示領域内の点のみを描画
- **点の間引き**: 総点数が負荷軽減閾値を超えると、均等に点をスキップ
- **チャンク分割ストレージ**: 点は10,000要素のチャンクに分割して格納し、メモリ効率を向上
- **非同期バッチ処理**: 大量の点の追加はバッチ処理され、UIフリーズを防止

## スクリーンショット

### 初期状態
![初期状態](https://github.com/user-attachments/assets/3471383a-df20-4119-875e-614847e20bc6)

### 10,000点描画時
![点描画時](https://github.com/user-attachments/assets/e3d2f62e-7686-4e07-aa76-b43df9e971e7)

### ズームイン表示
![ズーム](https://github.com/user-attachments/assets/8e53eeb4-1fc3-4c09-a6a7-29ff46050ba2)

### 負荷軽減コントロール
![負荷軽減](https://github.com/user-attachments/assets/1853e293-0928-4ca0-bebe-28dc953bf71a)

## 使用方法

`Sierpinski_3.html` をWebブラウザで開くだけで使用できます。サーバーやビルドプロセスは不要です。

## ブラウザサポート

HTML5 Canvasをサポートするすべてのモダンブラウザで動作：
- Chrome
- Firefox
- Safari
- Edge

モバイルブラウザではタッチ操作にも対応しています。

## ライセンス

このプロジェクトはオープンソースです。
